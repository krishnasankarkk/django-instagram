{% extends "base.html" %}
{% load static %}
{% block title %}
    <title>Home</title>
{% endblock title %}
{% block main_content %}
        <link rel="stylesheet" type="text/css" href="{% static '/css/home.css' %}">
        <div class="users-section">
            <h1>Users</h1>
            <div class="users">
                {% if users %}
                    {% for user in users %}
                    <a href="{% url 'users:user-profile' user_id=user.user_id %}">
                        <div class="user">
                            {% comment %} {% if user.profile_pic %}
                                <img id="profile-pic" src="/media/{{user.profile_pic}}" alt="profile pic">
                            {% else %} {% endcomment %}
                                <img id="profile-pic" src="{% static '/images/profile.png' %}" alt="profile pic">
                            {% comment %} {% endif %} {% endcomment %}
                            <span>{{user.user.username}}</span>
                        </div>
                    </a>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
        <div class="posts-section">
            <h1>Following posts</h1>
            <div class="posts">
                {% if following_posts %}
                    {% for post in following_posts %}
                        <div class="post">
                            <h2>{{post.user.username}}</h2>
                            <h3>{{post.caption}}</h3>
                            <h4>{{post.created_at}}</h4>
                        </div>
                    {% endfor %}
                {% else %}
                    <h2>No posts</h2>
                {% endif %}
            </div>
        </div>
        <div class="posts-section">
            <h1>All posts</h1>
            <div class="posts">
                {% if all_posts %}
                    {% for post in all_posts %}
                        <div class="post">
                            {% if post.user.id == user.id %}
                                <h2>You</h2>
                            {% else %}
                                <h2>{{post.user.username}}</h2>
                            {% endif %}
                            <h3>{{post.caption}}</h3>
                            <div style="display:flex;flex-direction:row;align-items:center;gap:10px;">
                                <i class="fa fa-upload" aria-hidden="true"></i>
                                <h4>{{post.created_at}}</h4>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <h2>No posts</h2>
                {% endif %}
            </div>
        </div>
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{message.tags}}">
                    <strong>{{message}}</strong>&nbsp;
                </div>
            {% endfor %}
        {% endif %}
        {% comment %} <script>
            document.getElementById("go-to-profile").addEventListener("click", function (){
                window.location.href = "{% url 'profile' %}"
            })
        </script> {% endcomment %}
{% endblock main_content %}